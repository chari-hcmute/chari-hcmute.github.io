(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Ac6m:function(t,e,i){"use strict";i.r(e),i.d(e,"ProjectReachedModule",function(){return Y});var n=i("SVse"),o=i("iInd"),c=i("mrSG"),a=i("OC8m"),r=i("dFnA"),s=i("klZy"),l=i("p46w"),g=i.n(l),d=i("iELJ"),b=(i("OF70"),i("nYR2")),u=i("8Y7J"),p=i("fMxG"),h=i("Dxy4"),f=i("Tj54"),m=i("Q2Ze"),v=i("e6WT"),U=i("s7LF"),D=i("pMoy"),V=i("40+f");let P=(()=>{class t{constructor(){this.files=new u.o,this.background="#f5fcff",this.opacity="1"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1"}ondrop(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1";let e=t.dataTransfer.files;e.length>0&&this.files.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=u.Kb({type:t,selectors:[["","imageDragDrop",""]],hostVars:4,hostBindings:function(t,e){1&t&&u.cc("dragover",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("drop",function(t){return e.ondrop(t)}),2&t&&u.yc("background-color",e.background)("opacity",e.opacity)},outputs:{files:"files"}}),t})(),I=(()=>{class t{constructor(){this.files=new u.o,this.background="#f5fcff",this.opacity="1"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1"}ondrop(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1";let e=t.dataTransfer.files;e.length>0&&this.files.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=u.Kb({type:t,selectors:[["","videoDragDrop",""]],hostVars:4,hostBindings:function(t,e){1&t&&u.cc("dragover",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("drop",function(t){return e.ondrop(t)}),2&t&&u.yc("background-color",e.background)("opacity",e.opacity)},outputs:{files:"files"}}),t})();function y(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",17),u.cc("click",function(){return u.uc(t),u.sc(2).click()})("files",function(e){u.uc(t);const i=u.gc().$implicit;return u.gc().uploadImages(e,i)}),u.Vb(1,"input",18,19),u.cc("change",function(e){u.uc(t);const i=u.gc().$implicit;return u.gc().uploadImages(e.target.files,i)}),u.Ub(),u.Ub()}}function k(t,e){1&t&&u.Qb(0,"div",20)}function C(t,e){1&t&&u.Qb(0,"div",21)}function M(t,e){if(1&t&&u.Qb(0,"img",24),2&t){const t=u.gc(2).$implicit,e=u.gc();u.lc("src",e.imageUrls[t],u.wc)}}function x(t,e){if(1&t){const t=u.Wb();u.Vb(0,"button",25),u.cc("click",function(){u.uc(t);const e=u.gc(2).index;return u.gc().deleteAttachment(e)}),u.Qb(1,"i",26),u.Ub()}}function w(t,e){if(1&t&&(u.Vb(0,"div",21),u.Bc(1,M,1,1,"img",22),u.Bc(2,x,2,0,"button",23),u.Ub()),2&t){const t=u.gc().$implicit,e=u.gc();u.Db(1),u.lc("ngIf",e.imageUrls[t]),u.Db(1),u.lc("ngIf",e.imageUrls[t])}}function O(t,e){if(1&t&&(u.Vb(0,"mat-grid-tile"),u.Bc(1,y,3,0,"div",14),u.Bc(2,k,1,0,"div",15),u.Bc(3,C,1,0,"div",16),u.Bc(4,w,3,2,"div",16),u.Ub()),2&t){const t=e.$implicit,i=u.gc();u.Db(1),u.lc("ngIf",!i.imageUrls[t]&&!i.isUpLoadingImage),u.Db(1),u.lc("ngIf",!i.imageUrls[t]&&i.isUpLoadingImage&&t==i.upLoadingIndex),u.Db(1),u.lc("ngIf",!i.imageUrls[t]&&i.isUpLoadingImage&&t!=i.upLoadingIndex),u.Db(1),u.lc("ngIf",i.imageUrls[t])}}function j(t,e){if(1&t){const t=u.Wb();u.Vb(0,"div",27),u.cc("click",function(){return u.uc(t),u.sc(2).click()})("files",function(e){return u.uc(t),u.gc().uploadVideo(e)}),u.Vb(1,"input",28,29),u.cc("change",function(e){return u.uc(t),u.gc().uploadVideo(e.target.files)}),u.Ub(),u.Ub()}}function _(t,e){1&t&&u.Qb(0,"div",30)}function L(t,e){if(1&t&&(u.Vb(0,"video",33),u.Qb(1,"source",34),u.Ub()),2&t){const t=u.gc(2);u.lc("src",t.videoUrl,u.wc)}}function T(t,e){if(1&t){const t=u.Wb();u.Vb(0,"button",35),u.cc("click",function(){return u.uc(t),u.gc(2).deleteVideo()}),u.Qb(1,"i",26),u.Ub()}}function S(t,e){if(1&t&&(u.Vb(0,"div",30),u.Bc(1,L,2,1,"video",31),u.Bc(2,T,2,0,"button",32),u.Ub()),2&t){const t=u.gc();u.Db(1),u.lc("ngIf",t.videoUrl),u.Db(1),u.lc("ngIf",t.videoUrl)}}const B=function(){return[0,1,2,3,4,5]};let R=(()=>{class t{constructor(t,e,i,n,o){this.notificationService=t,this.projectService=e,this.dialogRef=i,this.storage=n,this.data=o,this.imageUrls=[],i.disableClose=!0}ngOnInit(){this.clb_id=JSON.parse(g.a.get("loginInfo")).info.clb_ID,this.getProject(),this.initImageArray(),this.videoUrl=this.data.videoUrl}initImageArray(){this.imageUrls=this.data.images;let t=this.imageUrls.length;for(let e=0;e<6-t;e++)this.imageUrls.push("")}uploadImages(t,e){if(this.isUpLoadingImage=!0,this.upLoadingIndex=e,t.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 \u1ea3nh"),this.isUpLoadingImage=!1,void(this.upLoadingIndex=null);for(let n=0;n<t.length;n++){var i=Date.now();const o=t[n],c=this.storage.ref(`chari/${i}`);this.storage.upload(`chari/${i}`,o).snapshotChanges().pipe(Object(b.a)(()=>{this.downloadURL=c.getDownloadURL(),this.downloadURL.subscribe(t=>{t&&(this.imageUrls[e]=t,this.isUpLoadingImage=!1,this.upLoadingIndex=null)})})).subscribe(t=>{t&&console.log(t)})}}uploadVideo(t){if(this.isUploadingVideo=!0,t.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 video"),void(this.isUploadingVideo=!1);for(let i=0;i<t.length;i++){var e=Date.now();const n=t[i],o=this.storage.ref(`chari_video/${e}`);this.storage.upload(`chari_video/${e}`,n).snapshotChanges().pipe(Object(b.a)(()=>{this.downloadURL=o.getDownloadURL(),this.downloadURL.subscribe(t=>{t&&(this.videoUrl=t,this.isUploadingVideo=!1)})})).subscribe(t=>{t&&console.log(t)})}}deleteAttachment(t){this.imageUrls[t]=""}deleteVideo(){this.videoUrl=null}getProject(){return Object(c.b)(this,void 0,void 0,function*(){this.Projects=yield(yield this.projectService.getAllProjects(this.clb_id)).data})}save(){this.data.videoUrl=this.videoUrl,this.data.imageUrl=this.imageUrls[0],this.data.images=this.imageUrls,this.dialogRef.close(this.data)}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(a.a),u.Pb(s.a),u.Pb(d.g),u.Pb(p.a),u.Pb(d.a))},t.\u0275cmp=u.Jb({type:t,selectors:[["app-dialog-post"]],decls:28,vars:15,consts:[["mat-icon-button","","mat-dialog-close","",1,"close-button"],["color","warn",1,"close-icon"],["mat-dialog-tile",""],["appearance","outline"],["name","post_name","matInput","","required","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["matInput","","name","content","required","",3,"ngModel","ngModelChange"],["disabled","","matInput","","name","content",3,"ngModel","ngModelChange"],["name","publicPost",3,"ngModel","ngModelChange"],["cols","3"],[4,"ngFor","ngForOf"],["class","video-container","videoDragDrop","",3,"click","files",4,"ngIf"],["class","video-container-loading",4,"ngIf"],["align","end"],["mat-button","",1,"btn","btn-success",3,"click"],["class","image-container","imageDragDrop","",3,"click","files",4,"ngIf"],["class","image-container-loading",4,"ngIf"],["class","image-container",4,"ngIf"],["imageDragDrop","",1,"image-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".jpg,.jpeg,.png",3,"change"],["imageInput",""],[1,"image-container-loading"],[1,"image-container"],["alt","",3,"src",4,"ngIf"],["type","button","class","button btn btn-danger btn-sm",3,"click",4,"ngIf"],["alt","",3,"src"],["type","button",1,"button","btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-remove"],["videoDragDrop","",1,"video-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".mp4",3,"change"],["fileInput",""],[1,"video-container-loading"],["controls","",3,"src",4,"ngIf"],["type","button","class","delete-video-button btn btn-danger btn-sm",3,"click",4,"ngIf"],["controls","",3,"src"],["src","videoUrl","type","video/mp4"],["type","button",1,"delete-video-button","btn","btn-danger","btn-sm",3,"click"]],template:function(t,e){1&t&&(u.Vb(0,"button",0),u.Vb(1,"mat-icon",1),u.Dc(2,"close"),u.Ub(),u.Ub(),u.Vb(3,"h3",2),u.Dc(4,"Th\xeam tin t\u1ee9c m\u1edbi"),u.Ub(),u.Vb(5,"mat-dialog-content"),u.Vb(6,"mat-form-field",3),u.Vb(7,"mat-label"),u.Dc(8,"T\xean Tin"),u.Ub(),u.Vb(9,"input",4),u.cc("ngModelChange",function(t){return e.data.name=t}),u.Ub(),u.Ub(),u.Vb(10,"mat-form-field",3),u.Vb(11,"mat-label"),u.Dc(12,"N\u1ed9i dung"),u.Ub(),u.Vb(13,"textarea",5),u.cc("ngModelChange",function(t){return e.data.content=t}),u.Ub(),u.Ub(),u.Vb(14,"mat-form-field",3),u.Vb(15,"mat-label"),u.Dc(16,"D\u1ef1 \xe1n li\xean quan"),u.Ub(),u.Vb(17,"input",6),u.cc("ngModelChange",function(t){return e.data.projectName=t}),u.Ub(),u.Ub(),u.Vb(18,"mat-checkbox",7),u.cc("ngModelChange",function(t){return e.data.isPublic=t}),u.Dc(19,"C\xf4ng b\u1ed1 Tin"),u.Ub(),u.Vb(20,"mat-grid-list",8),u.Bc(21,O,5,4,"mat-grid-tile",9),u.Ub(),u.Bc(22,j,3,0,"div",10),u.Bc(23,_,1,0,"div",11),u.Bc(24,S,3,2,"div",11),u.Ub(),u.Vb(25,"mat-dialog-actions",12),u.Vb(26,"button",13),u.cc("click",function(){return e.save()}),u.Dc(27,"L\u01b0u"),u.Ub(),u.Ub()),2&t&&(u.Db(6),u.yc("width",100,"%"),u.Db(3),u.lc("ngModel",e.data.name),u.Db(1),u.yc("width",100,"%"),u.Db(3),u.lc("ngModel",e.data.content),u.Db(1),u.yc("width",50,"%"),u.Db(3),u.lc("ngModel",e.data.projectName),u.Db(1),u.lc("ngModel",e.data.isPublic),u.Db(3),u.lc("ngForOf",u.nc(14,B)),u.Db(1),u.lc("ngIf",!e.videoUrl&&!e.isUploadingVideo),u.Db(1),u.lc("ngIf",e.isUploadingVideo),u.Db(1),u.lc("ngIf",e.videoUrl))},directives:[h.a,d.d,f.a,d.e,m.b,m.e,v.b,U.c,U.m,U.i,U.k,D.a,V.a,n.j,n.k,d.c,V.c,P,I],styles:[".image-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif)}.image-container[_ngcontent-%COMP%], .image-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:70px;background-position:50%;width:300px;height:180px;margin:5px}.image-container[_ngcontent-%COMP%]{background-image:url(upload.5ca7ecf41ef411651ece.png);border:1px dashed #1c8adb;border-radius:2px}.image-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}img[_ngcontent-%COMP%]{width:300px;height:182px;left:-2px;border-radius:2px}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute;top:-2px}.button[_ngcontent-%COMP%]{right:-5px}.video-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif);border-radius:6px}.video-container[_ngcontent-%COMP%], .video-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:300px;background-position:50%;width:100%;height:400px;margin:10px auto}.video-container[_ngcontent-%COMP%]{background-image:url(upload-video.08ba7a62c53b6c43597a.png);border:2px dashed #1c8adb;border-radius:6px}.video-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}video[_ngcontent-%COMP%]{position:absolute;border-radius:3px;width:100%;height:auto}.delete-video-button[_ngcontent-%COMP%]{position:absolute;right:0}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.back-button[_ngcontent-%COMP%]{float:left;top:-24px;left:-24px}"]}),t})();var F=i("6No5"),N=i("ZTz/"),$=i("978R"),Q=i("UhP/");function A(t,e){1&t&&(u.Vb(0,"td"),u.Dc(1,"Ch\u01b0a gi\u1ea3i ng\xe2n"),u.Ub())}function z(t,e){1&t&&(u.Vb(0,"td"),u.Dc(1,"\u0110\xe3 gi\u1ea3i ng\xe2n"),u.Ub())}function J(t,e){if(1&t){const t=u.Wb();u.Vb(0,"tbody"),u.Vb(1,"td"),u.Dc(2),u.Ub(),u.Vb(3,"td",14),u.Dc(4),u.Ub(),u.Vb(5,"td"),u.Dc(6),u.Ub(),u.Vb(7,"td"),u.Dc(8),u.Ub(),u.Vb(9,"td"),u.Dc(10,"0"),u.Ub(),u.Bc(11,A,2,0,"td",15),u.Bc(12,z,2,0,"td",15),u.Vb(13,"td",8),u.Vb(14,"button",16),u.cc("click",function(){u.uc(t);const i=e.$implicit,n=u.gc();return n.clearData(i),n.openDialog()}),u.Qb(15,"i",17),u.Ub(),u.Ub(),u.Ub()}if(2&t){const t=e.$implicit,i=e.index;u.Db(2),u.Ec(i+1),u.Db(2),u.Ec(t.projectName),u.Db(2),u.Ec(t.projectType.projectTypeName),u.Db(2),u.Ec(t.targetMoney/1e6),u.Db(3),u.lc("ngIf",0==t.disbursed),u.Db(1),u.lc("ngIf",1==t.disbursed)}}function W(t,e){if(1&t&&(u.Vb(0,"mat-option",18),u.Dc(1),u.Ub()),2&t){const t=e.$implicit;u.lc("value",t.id),u.Db(1),u.Ec(t.value)}}const E=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.projectService=t,this.postService=e,this.notificationService=i,this.dialog=n,this.maxSize=5,this.itemsPerPage=5,this.currentPage=1,this.options=[{id:1,value:5},{id:2,value:10},{id:3,value:25},{id:4,value:100}],this.selected1=this.options[0].id,this.savePost=t=>Object(c.b)(this,void 0,void 0,function*(){try{(yield this.postService.savePost(t,this.clb_id))&&this.notificationService.success("Th\xeam tin t\u1ee9c th\xe0nh c\xf4ng")}catch(e){alert("Th\xeam tin t\u1ee9c th\u1ea5t b\u1ea1i")}})}pageChanged(t){this.currentPage=t.page,this.getList(this.currentPage,this.itemsPerPage)}rowsChanged(t){this.itemsPerPage=this.options[t.value-1].value,this.getList(this.currentPage,this.itemsPerPage)}ngOnInit(){this.clb_id=JSON.parse(g.a.get("loginInfo")).info.clb_ID,this.countTotal(),this.getList(1,this.itemsPerPage)}countTotal(){return Object(c.b)(this,void 0,void 0,function*(){this.totalItems=yield(yield this.projectService.countReached(this.clb_id)).data})}getList(t,e){return Object(c.b)(this,void 0,void 0,function*(){this.Projects=yield(yield this.projectService.getReached(this.clb_id,t,e)).data})}openDialog(){this.dialog.open(R,{width:"900px",data:this.Post}).afterClosed().subscribe(t=>{t&&this.savePost(t)})}clearData(t){this.Post={pos_ID:null,name:"",content:"",projectId:t.prj_ID,projectName:t.projectName,isPublic:!0,imageUrl:"",videoUrl:"",collaboratorId:this.clb_id,images:[]}}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(s.a),u.Pb(r.a),u.Pb(a.a),u.Pb(d.b))},t.\u0275cmp=u.Jb({type:t,selectors:[["ng-component"]],decls:35,vars:11,consts:[[1,"col-lg"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"card-title"],[1,"card-body"],[1,"table","table-light"],[2,"text-align","right"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"totalItems","ngModel","maxSize","boundaryLinks","rotate","itemsPerPage","ngModelChange","pageChanged"],["align","right"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"width","30%"],[4,"ngIf"],["type","button","tooltip","\u0110\u0103ng tin t\u1ee9c",1,"btn","btn-stack-overflow","btn-sm",3,"click"],[1,"fa","fa-plus-square"],[3,"value"]],template:function(t,e){1&t&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Vb(2,"div",2),u.Vb(3,"div",3),u.Vb(4,"div",4),u.Vb(5,"h3",5),u.Dc(6," D\u1ef1 \xe1n \u0111\xe3 th\xe0nh c\xf4ng "),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(7,"div",6),u.Vb(8,"table",7),u.Vb(9,"thead"),u.Vb(10,"tr"),u.Vb(11,"th"),u.Dc(12,"#"),u.Ub(),u.Vb(13,"th"),u.Dc(14,"T\xean D\u1ef1 \xe1n"),u.Ub(),u.Vb(15,"th"),u.Dc(16,"G\xf3i t\u1eeb thi\u1ec7n"),u.Ub(),u.Vb(17,"th"),u.Dc(18,"M\u1ee5c ti\xeau (Tri\u1ec7u \u0111\u1ed3ng)"),u.Ub(),u.Vb(19,"th"),u.Dc(20,"S\u1ed1 Tin li\xean quan"),u.Ub(),u.Vb(21,"th"),u.Dc(22,"T\xecnh tr\u1ea1ng"),u.Ub(),u.Vb(23,"th",8),u.Dc(24,"T\xe1c v\u1ee5"),u.Ub(),u.Ub(),u.Ub(),u.Bc(25,J,16,6,"tbody",9),u.Qb(26,"tbody"),u.Ub(),u.Vb(27,"div",3),u.Vb(28,"div",4),u.Vb(29,"pagination",10),u.cc("ngModelChange",function(t){return e.currentPage=t})("pageChanged",function(t){return e.pageChanged(t)}),u.Ub(),u.Ub(),u.Vb(30,"mat-form-field",11),u.Vb(31,"mat-label"),u.Dc(32,"S\u1ed1 h\xe0ng hi\u1ec3n th\u1ecb"),u.Ub(),u.Vb(33,"mat-select",12),u.cc("selectionChange",function(t){return e.rowsChanged(t)})("ngModelChange",function(t){return e.selected1=t}),u.Bc(34,W,2,2,"mat-option",13),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&t&&(u.Db(25),u.lc("ngForOf",e.Projects),u.Db(4),u.lc("totalItems",e.totalItems)("ngModel",e.currentPage)("maxSize",e.maxSize)("boundaryLinks",!0)("rotate",!1)("itemsPerPage",e.itemsPerPage),u.Db(1),u.yc("width",80,"px"),u.Db(3),u.lc("ngModel",e.selected1),u.Db(1),u.lc("ngForOf",e.options))},directives:[n.j,F.a,U.i,U.k,m.b,m.e,N.a,n.k,$.a,Q.m],encapsulation:2}),t})(),data:{title:"D\u1ef1 \xe1n \u0111\xe3 th\xe0nh c\xf4ng"}}];let q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[o.g.forChild(E)],o.g]}),t})();var Z=i("kMuZ"),G=i("jmUF"),K=i("AytR");let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.Nb({type:t}),t.\u0275inj=u.Mb({imports:[[n.c,q,F.b.forRoot(),U.e,Z.a,p.b,G.a.initializeApp(K.a.firebaseConfig,"cloud"),$.b.forRoot()]]}),t})()}}]);