(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8CbO":function(t,e,i){"use strict";i.r(e),i.d(e,"ProjectModule",function(){return gt});var n=i("SVse"),c=i("jmUF"),o=i("fMxG"),a=i("AytR"),r=i("iInd"),l=i("mrSG"),d=i("OC8m"),s=i("klZy"),b=i("iELJ"),g=(i("bmHB"),i("SsA2")),u=i("y84U"),p=i("nYR2"),h=i("p46w"),f=i.n(h),m=i("pmY2"),D=i("8Y7J"),v=i("Dxy4"),U=i("Tj54"),y=i("Q2Ze"),V=i("e6WT"),P=i("s7LF"),I=i("TN/R"),j=i("ZTz/"),M=i("40+f"),k=i("pMoy"),C=i("UhP/");let _=(()=>{class t{constructor(){this.files=new D.o,this.background="#f5fcff",this.opacity="1"}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.background="#9ecbec",this.opacity="0.8"}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1"}ondrop(t){t.preventDefault(),t.stopPropagation(),this.background="#f5fcff",this.opacity="1";let e=t.dataTransfer.files;e.length>0&&this.files.emit(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=D.Kb({type:t,selectors:[["","videoDragDrop",""]],hostVars:4,hostBindings:function(t,e){1&t&&D.cc("dragover",function(t){return e.onDragOver(t)})("dragleave",function(t){return e.onDragLeave(t)})("drop",function(t){return e.ondrop(t)}),2&t&&D.yc("background-color",e.background)("opacity",e.opacity)},outputs:{files:"files"}}),t})();function O(t,e){1&t&&(D.Vb(0,"h3",26),D.Dc(1,"Th\xeam D\u1ef1 \xe1n t\u1eeb thi\u1ec7n"),D.Ub())}function x(t,e){1&t&&(D.Vb(0,"h3",26),D.Dc(1,"C\u1eadp nh\u1eadt D\u1ef1 \xe1n t\u1eeb thi\u1ec7n"),D.Ub())}function w(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-checkbox",27),D.cc("click",function(){return D.uc(t),D.gc().changeState()})("ngModelChange",function(e){return D.uc(t),D.gc().data.canDisburseWhenOverdue=e}),D.Dc(1,"Cho ph\xe9p gi\u1ea3i ng\xe2n khi h\u1ebft h\u1ea1n"),D.Ub()}if(2&t){const t=D.gc();D.lc("ngModel",t.data.canDisburseWhenOverdue)}}function S(t,e){if(1&t&&(D.Vb(0,"mat-option",29),D.Vb(1,"a"),D.Dc(2),D.Ub(),D.Ub()),2&t){const t=e.$implicit;D.lc("value",t.prt_ID),D.Db(2),D.Ec(t.projectTypeName)}}function T(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-form-field"),D.Vb(1,"mat-label"),D.Dc(2,"G\xf3i t\u1eeb thi\u1ec7n"),D.Ub(),D.Vb(3,"mat-select",28),D.cc("ngModelChange",function(e){return D.uc(t),D.gc().data.prt_ID=e}),D.Bc(4,S,3,2,"mat-option",19),D.Ub(),D.Ub()}if(2&t){const t=D.gc();D.yc("width",30,"%"),D.Db(3),D.lc("ngModel",t.data.prt_ID),D.Db(1),D.lc("ngForOf",t.filterProjectType())}}function B(t,e){if(1&t&&(D.Vb(0,"mat-option",29),D.Vb(1,"a"),D.Dc(2),D.Ub(),D.Ub()),2&t){const t=e.$implicit;D.lc("value",t.stp_ID),D.Db(2),D.Ec(t.fullName)}}function W(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-form-field"),D.Vb(1,"mat-label"),D.Dc(2,"Ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),D.Ub(),D.Vb(3,"mat-select",30),D.cc("ngModelChange",function(e){return D.uc(t),D.gc().data.stp_ID=e}),D.Bc(4,B,3,2,"mat-option",19),D.Ub(),D.Ub()}if(2&t){const t=D.gc();D.yc("width",20,"%"),D.Db(3),D.lc("ngModel",t.data.stp_ID),D.Db(1),D.lc("ngForOf",t.SupportedPeoples)}}function N(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-checkbox",31),D.cc("click",function(){return D.uc(t),D.gc().changeState()})("ngModelChange",function(e){return D.uc(t),D.gc().data.canDisburseWhenOverdue=e}),D.Dc(1,"Cho ph\xe9p gi\u1ea3i ng\xe2n khi h\u1ebft h\u1ea1n"),D.Ub()}if(2&t){const t=D.gc();D.lc("ngModel",t.data.canDisburseWhenOverdue)}}function L(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-form-field",3),D.Vb(1,"mat-label"),D.Dc(2,"G\xf3i t\u1eeb thi\u1ec7n"),D.Ub(),D.Vb(3,"input",32),D.cc("ngModelChange",function(e){return D.uc(t),D.gc().data.projectType.projectTypeName=e}),D.Ub(),D.Ub()}if(2&t){const t=D.gc();D.Db(3),D.lc("ngModel",t.data.projectType.projectTypeName)}}function Q(t,e){if(1&t){const t=D.Wb();D.Vb(0,"mat-form-field",3),D.Vb(1,"mat-label"),D.Dc(2,"Ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),D.Ub(),D.Vb(3,"input",32),D.cc("ngModelChange",function(e){return D.uc(t),D.gc().data.supportedPeople.fullName=e}),D.Ub(),D.Ub()}if(2&t){const t=D.gc();D.yc("width",20,"%"),D.Db(3),D.lc("ngModel",t.data.supportedPeople.fullName)}}function $(t,e){if(1&t&&(D.Vb(0,"mat-option",29),D.Vb(1,"a"),D.Dc(2),D.Ub(),D.Ub()),2&t){const t=e.$implicit;D.lc("value",t.cti_ID),D.Db(2),D.Ec(t.name)}}function F(t,e){if(1&t){const t=D.Wb();D.Vb(0,"div",36),D.cc("click",function(){return D.uc(t),D.sc(2).click()})("files",function(e){D.uc(t);const i=D.gc().$implicit;return D.gc().uploadImages(e,i)}),D.Vb(1,"input",37,38),D.cc("change",function(e){D.uc(t);const i=D.gc().$implicit;return D.gc().uploadImages(e.target.files,i)}),D.Ub(),D.Ub()}}function E(t,e){1&t&&D.Qb(0,"div",39)}function R(t,e){1&t&&D.Qb(0,"div",40)}function q(t,e){if(1&t&&D.Qb(0,"img",43),2&t){const t=D.gc(2).$implicit,e=D.gc();D.lc("src",e.imageUrls[t],D.wc)}}function A(t,e){if(1&t){const t=D.Wb();D.Vb(0,"button",44),D.cc("click",function(){D.uc(t);const e=D.gc(2).index;return D.gc().deleteAttachment(e)}),D.Qb(1,"i",45),D.Ub()}}function z(t,e){if(1&t&&(D.Vb(0,"div",40),D.Bc(1,q,1,1,"img",41),D.Bc(2,A,2,0,"button",42),D.Ub()),2&t){const t=D.gc().$implicit,e=D.gc();D.Db(1),D.lc("ngIf",e.imageUrls[t]),D.Db(1),D.lc("ngIf",e.imageUrls[t])}}function J(t,e){if(1&t&&(D.Vb(0,"mat-grid-tile"),D.Bc(1,F,3,0,"div",33),D.Bc(2,E,1,0,"div",34),D.Bc(3,R,1,0,"div",35),D.Bc(4,z,3,2,"div",35),D.Ub()),2&t){const t=e.$implicit,i=D.gc();D.Db(1),D.lc("ngIf",!i.imageUrls[t]&&!i.isUpLoadingImage),D.Db(1),D.lc("ngIf",!i.imageUrls[t]&&i.isUpLoadingImage&&t==i.upLoadingIndex),D.Db(1),D.lc("ngIf",!i.imageUrls[t]&&i.isUpLoadingImage&&t!=i.upLoadingIndex),D.Db(1),D.lc("ngIf",i.imageUrls[t])}}function G(t,e){if(1&t){const t=D.Wb();D.Vb(0,"div",46),D.cc("click",function(){return D.uc(t),D.sc(2).click()})("files",function(e){return D.uc(t),D.gc().uploadVideo(e)}),D.Vb(1,"input",47,48),D.cc("change",function(e){return D.uc(t),D.gc().uploadVideo(e.target.files)}),D.Ub(),D.Ub()}}function H(t,e){1&t&&D.Qb(0,"div",49)}function Z(t,e){if(1&t&&(D.Vb(0,"video",52),D.Qb(1,"source",53),D.Ub()),2&t){const t=D.gc(2);D.lc("src",t.videoUrl,D.wc)}}function Y(t,e){if(1&t){const t=D.Wb();D.Vb(0,"button",54),D.cc("click",function(){return D.uc(t),D.gc(2).deleteVideo()}),D.Qb(1,"i",45),D.Ub()}}function X(t,e){if(1&t&&(D.Vb(0,"div",49),D.Bc(1,Z,2,1,"video",50),D.Bc(2,Y,2,0,"button",51),D.Ub()),2&t){const t=D.gc();D.Db(1),D.lc("ngIf",t.videoUrl),D.Db(1),D.lc("ngIf",t.videoUrl)}}const K=function(){return[0,1,2,3,4,5]};let tt=(()=>{class t{constructor(t,e,i,n,c,o,a){this.notificationService=t,this.cityService=e,this.SupportedPeopleService=i,this.projectTypeService=n,this.dialogRef=c,this.storage=o,this.data=a,this.imageUrls=[],this.canDisburseWhenOverdue=!0,this.isUploadingVideo=!1,c.disableClose=!0}ngOnInit(){this.clb_id=JSON.parse(f.a.get("loginInfo")).info.clb_ID,this.getProjectType(),this.getCity(),this.getSupportedPeople(),this.initImageArray(),this.videoUrl=this.data.videoUrl}initImageArray(){this.imageUrls=this.data.images;let t=this.imageUrls.length;for(let e=0;e<6-t;e++)this.imageUrls.push("")}uploadImages(t,e){if(this.isUpLoadingImage=!0,this.upLoadingIndex=e,t.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 \u1ea3nh"),this.isUpLoadingImage=!1,void(this.upLoadingIndex=null);for(let n=0;n<t.length;n++){var i=Date.now();const c=t[n],o=this.storage.ref(`chari/${i}`);this.storage.upload(`chari/${i}`,c).snapshotChanges().pipe(Object(p.a)(()=>{this.downloadURL=o.getDownloadURL(),this.downloadURL.subscribe(t=>{t&&(this.imageUrls[e]=t,this.isUpLoadingImage=!1,this.upLoadingIndex=null)})})).subscribe(t=>{t&&console.log(t)})}}uploadVideo(t){if(this.isUploadingVideo=!0,t.length>1)return this.notificationService.warn("Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ecdn 1 video"),void(this.isUploadingVideo=!1);for(let i=0;i<t.length;i++){var e=Date.now();const n=t[i],c=this.storage.ref(`chari_post_video/${e}`);this.storage.upload(`chari_post_video/${e}`,n).snapshotChanges().pipe(Object(p.a)(()=>{this.downloadURL=c.getDownloadURL(),this.downloadURL.subscribe(t=>{t&&(this.videoUrl=t,this.isUploadingVideo=!1)})})).subscribe(t=>{t&&console.log(t)})}}deleteAttachment(t){this.imageUrls[t]=""}deleteVideo(){this.videoUrl=null}getCity(){return Object(l.b)(this,void 0,void 0,function*(){this.Cities=yield(yield this.cityService.getCities()).data})}getProjectType(){return Object(l.b)(this,void 0,void 0,function*(){this.ProjectTypes=yield(yield this.projectTypeService.getProjectTypes()).data})}getSupportedPeople(){return Object(l.b)(this,void 0,void 0,function*(){this.SupportedPeoples=yield(yield this.SupportedPeopleService.getAll(this.clb_id)).data})}changeState(){this.canDisburseWhenOverdue=1!=this.canDisburseWhenOverdue}filterProjectType(){return this.ProjectTypes.filter(t=>t.canDisburseWhenOverdue==this.canDisburseWhenOverdue)}saveImageAndVideo(){for(this.data.videoUrl=this.videoUrl;this.imageUrls.indexOf("",0)>-1;){const t=this.imageUrls.indexOf("",0);t>-1&&this.imageUrls.splice(t,1)}this.data.imageUrl=this.imageUrls[0],this.data.images=this.imageUrls}save(){this.saveImageAndVideo(),""!=this.data.projectName&&""!=this.data.briefDescription&&""!=this.data.description&&null!=this.data.cti_ID&&""!=this.data.startDate&&""!=this.data.endDate&&""!=this.data.targetMoney&&null!=this.data.prt_ID&&null!=this.data.stp_ID?this.data.description.length<300?this.notificationService.warn("H\xe3y \u0111i\u1ec1n n\u1ed9i dung d\u1ef1 \xe1n t\u1ed1i thi\u1ec3u 100 t\u1eeb"):null!=this.data.imageUrl?this.dialogRef.close(this.data):this.notificationService.warn("H\xe3y t\u1ea3i l\xean \xedt nh\u1ea5t 1 h\xecnh \u1ea3nh cho tin t\u1ee9c"):this.notificationService.warn("H\xe3y \u0111i\u1ec1n v\xe0 ch\u1ecdn \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin")}}return t.\u0275fac=function(e){return new(e||t)(D.Pb(d.a),D.Pb(m.a),D.Pb(g.a),D.Pb(u.a),D.Pb(b.g),D.Pb(o.a),D.Pb(b.a))},t.\u0275cmp=D.Jb({type:t,selectors:[["app-dialog-project"]],decls:55,vars:39,consts:[["mat-icon-button","","mat-dialog-close","",1,"close-button"],["color","warn",1,"close-icon"],["mat-dialog-tile","",4,"ngIf"],["appearance","outline"],["name","project_name","matInput","","required","","cdkFocusInitial","",3,"ngModel","ngModelChange"],["name","brief_description","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","name","description","required","",3,"ngModel","ngModelChange"],["name","target_money","matInput","","required","",3,"ngModel","ngModelChange"],["matInput","","name","startDate","required","",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["pickerStartDate",""],["matInput","","name","endDate","required","",3,"matDatepicker","ngModel","ngModelChange"],["pickerEndDate",""],["name","canDisburseWhenOverdue",3,"ngModel","click","ngModelChange",4,"ngIf"],[3,"width",4,"ngIf"],["disabled","","name","canDisburseWhenOverdue",3,"ngModel","click","ngModelChange",4,"ngIf"],["appearance","outline",4,"ngIf"],["appearance","outline",3,"width",4,"ngIf"],["id","city_id","name","city_id","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["cols","3"],[4,"ngFor","ngForOf"],["class","video-container","videoDragDrop","",3,"click","files",4,"ngIf"],["class","video-container-loading",4,"ngIf"],["align","end"],["mat-button","",1,"btn","btn-success",3,"click"],["mat-dialog-tile",""],["name","canDisburseWhenOverdue",3,"ngModel","click","ngModelChange"],["id","project_type_id","name","project_type_id","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["id","supported_people_id","name","supported_people_id","required","",1,"form-control",3,"ngModel","ngModelChange"],["disabled","","name","canDisburseWhenOverdue",3,"ngModel","click","ngModelChange"],["disabled","","name","project_type","matInput","","required","",3,"ngModel","ngModelChange"],["class","image-container","imageDragDrop","",3,"click","files",4,"ngIf"],["class","image-container-loading",4,"ngIf"],["class","image-container",4,"ngIf"],["imageDragDrop","",1,"image-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".jpg,.jpeg,.png",3,"change"],["imageInput",""],[1,"image-container-loading"],[1,"image-container"],["alt","",3,"src",4,"ngIf"],["type","button","class","button btn btn-danger btn-sm",3,"click",4,"ngIf"],["alt","",3,"src"],["type","button",1,"button","btn","btn-danger","btn-sm",3,"click"],[1,"fa","fa-remove"],["videoDragDrop","",1,"video-container",3,"click","files"],["hidden","","type","file","multiple","false","accept",".mp4",3,"change"],["fileInput",""],[1,"video-container-loading"],["controls","",3,"src",4,"ngIf"],["type","button","class","delete-video-button btn btn-danger btn-sm",3,"click",4,"ngIf"],["controls","",3,"src"],["src","videoUrl","type","video/mp4"],["type","button",1,"delete-video-button","btn","btn-danger","btn-sm",3,"click"]],template:function(t,e){if(1&t&&(D.Vb(0,"button",0),D.Vb(1,"mat-icon",1),D.Dc(2,"close"),D.Ub(),D.Ub(),D.Bc(3,O,2,0,"h3",2),D.Bc(4,x,2,0,"h3",2),D.Vb(5,"mat-dialog-content"),D.Vb(6,"mat-form-field",3),D.Vb(7,"mat-label"),D.Dc(8,"T\xean D\u1ef1 \xe1n"),D.Ub(),D.Vb(9,"input",4),D.cc("ngModelChange",function(t){return e.data.projectName=t}),D.Ub(),D.Ub(),D.Vb(10,"mat-form-field",3),D.Vb(11,"mat-label"),D.Dc(12,"M\xf4 t\u1ea3 v\u1eafn t\u1eaft"),D.Ub(),D.Vb(13,"input",5),D.cc("ngModelChange",function(t){return e.data.briefDescription=t}),D.Ub(),D.Ub(),D.Vb(14,"mat-form-field",3),D.Vb(15,"mat-label"),D.Dc(16,"N\u1ed9i dung"),D.Ub(),D.Vb(17,"textarea",6),D.cc("ngModelChange",function(t){return e.data.description=t}),D.Ub(),D.Ub(),D.Vb(18,"mat-form-field",3),D.Vb(19,"mat-label"),D.Dc(20,"M\u1ee5c ti\xeau quy\xean g\xf3p"),D.Ub(),D.Vb(21,"input",7),D.cc("ngModelChange",function(t){return e.data.targetMoney=t}),D.Ub(),D.Ub(),D.Vb(22,"mat-form-field",3),D.Vb(23,"mat-label"),D.Dc(24,"Ng\xe0y b\u1eaft \u0111\u1ea7u"),D.Ub(),D.Vb(25,"input",8),D.cc("ngModelChange",function(t){return e.data.startDate=t}),D.Ub(),D.Qb(26,"mat-datepicker-toggle",9),D.Qb(27,"mat-datepicker",null,10),D.Ub(),D.Vb(29,"mat-form-field",3),D.Vb(30,"mat-label"),D.Dc(31,"Ng\xe0y k\u1ebft th\xfac"),D.Ub(),D.Vb(32,"input",11),D.cc("ngModelChange",function(t){return e.data.endDate=t}),D.Ub(),D.Qb(33,"mat-datepicker-toggle",9),D.Qb(34,"mat-datepicker",null,12),D.Ub(),D.Bc(36,w,2,1,"mat-checkbox",13),D.Bc(37,T,5,4,"mat-form-field",14),D.Bc(38,W,5,4,"mat-form-field",14),D.Bc(39,N,2,1,"mat-checkbox",15),D.Bc(40,L,4,1,"mat-form-field",16),D.Bc(41,Q,4,3,"mat-form-field",17),D.Vb(42,"mat-form-field"),D.Vb(43,"mat-label"),D.Dc(44,"T\u1ec9nh th\xe0nh"),D.Ub(),D.Vb(45,"mat-select",18),D.cc("ngModelChange",function(t){return e.data.cti_ID=t}),D.Bc(46,$,3,2,"mat-option",19),D.Ub(),D.Ub(),D.Vb(47,"mat-grid-list",20),D.Bc(48,J,5,4,"mat-grid-tile",21),D.Ub(),D.Bc(49,G,3,0,"div",22),D.Bc(50,H,1,0,"div",23),D.Bc(51,X,3,2,"div",23),D.Ub(),D.Vb(52,"mat-dialog-actions",24),D.Vb(53,"button",25),D.cc("click",function(){return e.save()}),D.Dc(54,"L\u01b0u"),D.Ub(),D.Ub()),2&t){const t=D.sc(28),i=D.sc(35);D.Db(3),D.lc("ngIf",null==e.data.prj_ID),D.Db(1),D.lc("ngIf",null!=e.data.prj_ID),D.Db(2),D.yc("width",100,"%"),D.Db(3),D.lc("ngModel",e.data.projectName),D.Db(1),D.yc("width",100,"%"),D.Db(3),D.lc("ngModel",e.data.briefDescription),D.Db(1),D.yc("width",100,"%"),D.Db(3),D.lc("ngModel",e.data.description),D.Db(1),D.yc("width",33,"%"),D.Db(3),D.lc("ngModel",e.data.targetMoney),D.Db(1),D.yc("width",32,"%"),D.Db(3),D.lc("matDatepicker",t)("ngModel",e.data.startDate),D.Db(1),D.lc("for",t),D.Db(3),D.yc("width",32,"%"),D.Db(3),D.lc("matDatepicker",i)("ngModel",e.data.endDate),D.Db(1),D.lc("for",i),D.Db(3),D.lc("ngIf",null==e.data.prj_ID),D.Db(1),D.lc("ngIf",null==e.data.prj_ID),D.Db(1),D.lc("ngIf",null==e.data.prj_ID),D.Db(1),D.lc("ngIf",null!=e.data.prj_ID),D.Db(1),D.lc("ngIf",null!=e.data.prj_ID),D.Db(1),D.lc("ngIf",null!=e.data.prj_ID),D.Db(1),D.yc("width",18,"%"),D.Db(3),D.lc("ngModel",e.data.cti_ID),D.Db(1),D.lc("ngForOf",e.Cities),D.Db(2),D.lc("ngForOf",D.nc(38,K)),D.Db(1),D.lc("ngIf",!e.videoUrl&&!e.isUploadingVideo),D.Db(1),D.lc("ngIf",e.isUploadingVideo),D.Db(1),D.lc("ngIf",e.videoUrl)}},directives:[v.a,b.d,U.a,n.k,b.e,y.b,y.e,V.b,P.c,P.m,P.i,P.k,I.b,I.d,y.f,I.a,j.a,n.j,M.a,b.c,k.a,C.m,M.c,_],styles:[".image-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif)}.image-container[_ngcontent-%COMP%], .image-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:70px;background-position:50%;width:300px;height:180px;margin:5px}.image-container[_ngcontent-%COMP%]{background-image:url(upload.5ca7ecf41ef411651ece.png);border:1px dashed #1c8adb;border-radius:2px}.image-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}img[_ngcontent-%COMP%]{width:300px;height:182px;left:-2px;border-radius:2px}.button[_ngcontent-%COMP%], img[_ngcontent-%COMP%]{position:absolute;top:-2px}.button[_ngcontent-%COMP%]{right:-5px}.video-container-loading[_ngcontent-%COMP%]{background-image:url(loading.8ce64eeb4935117736d4.gif);border-radius:6px}.video-container[_ngcontent-%COMP%], .video-container-loading[_ngcontent-%COMP%]{position:relative;background-repeat:no-repeat;background-size:300px;background-position:50%;width:100%;height:400px;margin:10px auto}.video-container[_ngcontent-%COMP%]{background-image:url(upload-video.08ba7a62c53b6c43597a.png);border:2px dashed #1c8adb;border-radius:6px}.video-container[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#9ecbec!important;opacity:.8}video[_ngcontent-%COMP%]{position:absolute;border-radius:3px;width:100%;height:auto}.delete-video-button[_ngcontent-%COMP%]{position:absolute;right:0}.close-button[_ngcontent-%COMP%]{float:right;top:-24px;right:-24px}.back-button[_ngcontent-%COMP%]{float:left;top:-24px;left:-24px}"]}),t})();var et=i("978R"),it=i("6No5");function nt(t,e){1&t&&(D.Vb(0,"td",12),D.Dc(1,"\u0110\xe3 ph\xea duy\u1ec7t"),D.Ub())}function ct(t,e){1&t&&(D.Vb(0,"td",12),D.Dc(1,"Ch\u01b0a ph\xea duy\u1ec7t"),D.Ub())}function ot(t,e){if(1&t){const t=D.Wb();D.Vb(0,"td",11),D.Vb(1,"button",24),D.cc("click",function(){D.uc(t);const e=D.gc().$implicit;return D.gc().openEditDialog(e)}),D.Qb(2,"i",25),D.Ub(),D.Vb(3,"button",26),D.Qb(4,"i",27),D.Ub(),D.Ub()}}function at(t,e){if(1&t){const t=D.Wb();D.Vb(0,"td",11),D.Vb(1,"button",24),D.cc("click",function(){D.uc(t);const e=D.gc().$implicit;return D.gc().openEditDialog(e)}),D.Qb(2,"i",25),D.Ub(),D.Vb(3,"button",28),D.cc("click",function(){D.uc(t);const e=D.gc().$implicit;return D.gc().deleteProject(e.prj_ID)}),D.Qb(4,"i",27),D.Ub(),D.Ub()}}function rt(t,e){if(1&t){const t=D.Wb();D.Vb(0,"tbody"),D.Vb(1,"td"),D.Dc(2),D.Ub(),D.Vb(3,"td",19),D.cc("click",function(){D.uc(t);const i=e.$implicit;return D.gc().openEditDialog(i)}),D.Qb(4,"img",20),D.Ub(),D.Vb(5,"td",21),D.cc("click",function(){D.uc(t);const i=e.$implicit;return D.gc().openEditDialog(i)}),D.Dc(6),D.Ub(),D.Vb(7,"td",11),D.Dc(8),D.Ub(),D.Vb(9,"td"),D.Dc(10),D.Ub(),D.Vb(11,"td"),D.Dc(12),D.Ub(),D.Bc(13,nt,2,0,"td",22),D.Bc(14,ct,2,0,"td",22),D.Bc(15,ot,5,0,"td",23),D.Bc(16,at,5,0,"td",23),D.Ub()}if(2&t){const t=e.$implicit,i=e.index,n=D.gc();D.Db(2),D.Ec(i+1),D.Db(2),D.lc("src",t.imageUrl,D.wc),D.Db(2),D.Ec(t.projectName),D.Db(2),D.Ec(n.numberWithCommas(t.targetMoney)),D.Db(2),D.Ec(t.projectType.projectTypeName),D.Db(2),D.Ec(t.supportedPeople.fullName),D.Db(1),D.lc("ngIf",1==t.verified),D.Db(1),D.lc("ngIf",1!=t.verified),D.Db(1),D.lc("ngIf",1==t.verified),D.Db(1),D.lc("ngIf",1!=t.verified)}}function lt(t,e){if(1&t&&(D.Vb(0,"mat-option",29),D.Dc(1),D.Ub()),2&t){const t=e.$implicit;D.lc("value",t.id),D.Db(1),D.Ec(t.value)}}const dt=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.ProjectService=t,this.notificationService=e,this.storage=i,this.dialog=n,this.maxSize=5,this.itemsPerPage=5,this.currentPage=1,this.options=[{id:1,value:5},{id:2,value:10},{id:3,value:25},{id:4,value:100}],this.selected1=this.options[0].id,this.ceateProject=t=>Object(l.b)(this,void 0,void 0,function*(){try{const e=yield(yield this.ProjectService.createProject(t,this.clb_id)).data;e&&(this.notificationService.success(e.message),this.getProjects(1,this.itemsPerPage))}catch(e){alert("Th\xeam d\u1ef1 \xe1n th\u1ea5t b\u1ea1i")}}),this.updateProject=t=>Object(l.b)(this,void 0,void 0,function*(){try{const e=yield(yield this.ProjectService.updateProject(t)).data;e&&(this.notificationService.success(e.message),this.getProjects(this.currentPage,this.itemsPerPage))}catch(e){alert("C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i")}}),this.deleteProject=t=>Object(l.b)(this,void 0,void 0,function*(){try{if(confirm("B\u1ea1n c\xf3 th\u1ef1c s\u1ef1 mu\u1ed1n xo\xe1 d\u1ef1 \xe1n n\xe0y?")){const e=yield(yield this.ProjectService.deleteProject(t)).data;e&&(this.notificationService.warn(e.message),this.getProjects(this.currentPage,this.itemsPerPage))}}catch(e){alert("X\xf3a d\u1ef1 \xe1n th\u1ea5t b\u1ea1i")}})}rowsChanged(t){this.itemsPerPage=this.options[t.value-1].value,this.getProjects(this.currentPage,this.itemsPerPage)}pageChanged(t){this.currentPage=t.page,this.getProjects(this.currentPage,this.itemsPerPage)}ngOnInit(){this.clb_id=JSON.parse(f.a.get("loginInfo")).info.clb_ID,this.getTotalUncloseProject(),this.getProjects(1,this.itemsPerPage)}getTotalUncloseProject(){return Object(l.b)(this,void 0,void 0,function*(){this.totalItems=yield(yield this.ProjectService.countUncloseProjects(this.clb_id)).data})}getProjects(t,e){return Object(l.b)(this,void 0,void 0,function*(){this.Projects=yield(yield this.ProjectService.getUncloseProjects(this.clb_id,t,e)).data})}openDialog(){this.dialog.open(tt,{width:"900px",data:this.Project}).afterClosed().subscribe(t=>{t&&(null==t.prj_ID?this.ceateProject(t):this.updateProject(t))})}openEditDialog(t){this.Project={prj_ID:t.prj_ID,projectName:t.projectName,briefDescription:t.briefDescription,description:t.description,imageUrl:t.imageUrl,videoUrl:t.videoUrl,startDate:t.startDate,endDate:t.endDate,targetMoney:t.targetMoney,canDisburseWhenOverdue:t.projectType.canDisburseWhenOverdue,prt_ID:t.projectType.prt_ID,projectType:t.projectType,stp_ID:t.supportedPeople.stp_ID,supportedPeople:t.supportedPeople,cti_ID:t.city.cti_ID,city:t.city,images:t.images},this.openDialog()}clearData(){this.Project={prj_ID:null,projectName:"",briefDescription:"",description:"",imageUrl:"",videoUrl:"",startDate:"",endDate:"",targetMoney:"",canDisburseWhenOverdue:!0,prt_ID:null,projectType:null,stp_ID:null,supportedPeople:null,cti_ID:null,city:null,images:[]}}numberWithCommas(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return t.\u0275fac=function(e){return new(e||t)(D.Pb(s.a),D.Pb(d.a),D.Pb(o.a),D.Pb(b.b))},t.\u0275cmp=D.Jb({type:t,selectors:[["ng-component"]],decls:42,vars:11,consts:[[1,"col-lg"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"card-title"],[1,"col-auto"],["type","button","tooltip","Th\xeam m\u1edbi m\u1ed9t d\u1ef1 \xe1n",1,"btn","btn-facebook",3,"click"],[1,"fa","fa-plus"],[1,"card-body"],[1,"table","table-light"],[2,"text-align","right"],[2,"width","18%"],[2,"width","90px","text-align","right"],[4,"ngFor","ngForOf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",1,"pagination-sm",3,"totalItems","ngModel","maxSize","boundaryLinks","rotate","itemsPerPage","ngModelChange","pageChanged"],["align","right"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],["width","70px","height","50px",2,"border-radius","5px",3,"src"],[2,"width","20%","cursor","pointer",3,"click"],["style","width: 18%",4,"ngIf"],["style","text-align: right",4,"ngIf"],["type","button","tooltip","C\u1eadp nh\u1eadt d\u1ef1 \xe1n",1,"btn","btn-info","btn-sm",3,"click"],[1,"fa","fa-pencil"],["disabled","","type","button",1,"btn","btn-danger","btn-sm",2,"opacity","0.15"],[1,"fa","fa-trash"],["type","button","tooltip","Xo\xe1 d\u1ef1 \xe1n",1,"btn","btn-danger","btn-sm",3,"click"],[3,"value"]],template:function(t,e){1&t&&(D.Vb(0,"div",0),D.Vb(1,"div",1),D.Vb(2,"div",2),D.Vb(3,"div",3),D.Vb(4,"div",4),D.Vb(5,"h3",5),D.Dc(6," D\u1ef1 \xe1n t\u1eeb thi\u1ec7n "),D.Ub(),D.Ub(),D.Vb(7,"div",6),D.Vb(8,"button",7),D.cc("click",function(){return e.clearData(),e.openDialog()}),D.Qb(9,"i",8),D.Vb(10,"a"),D.Dc(11,"Th\xeam"),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Vb(12,"div",9),D.Vb(13,"table",10),D.Vb(14,"thead"),D.Vb(15,"tr"),D.Vb(16,"th"),D.Dc(17,"#"),D.Ub(),D.Vb(18,"th"),D.Dc(19,"H\xecnh \u1ea3nh"),D.Ub(),D.Vb(20,"th"),D.Dc(21,"T\xean d\u1ef1 \xe1n"),D.Ub(),D.Vb(22,"th",11),D.Dc(23,"M\u1ee5c ti\xeau"),D.Ub(),D.Vb(24,"th"),D.Dc(25,"G\xf3i t\u1eeb thi\u1ec7n"),D.Ub(),D.Vb(26,"th"),D.Dc(27,"Ng\u01b0\u1eddi th\u1ee5 h\u01b0\u1edfng"),D.Ub(),D.Vb(28,"th",12),D.Dc(29,"T\xecnh tr\u1ea1ng"),D.Ub(),D.Vb(30,"th",13),D.Dc(31,"T\xe1c v\u1ee5"),D.Ub(),D.Ub(),D.Ub(),D.Bc(32,rt,17,10,"tbody",14),D.Qb(33,"tbody"),D.Ub(),D.Vb(34,"div",3),D.Vb(35,"div",4),D.Vb(36,"pagination",15),D.cc("ngModelChange",function(t){return e.currentPage=t})("pageChanged",function(t){return e.pageChanged(t)}),D.Ub(),D.Ub(),D.Vb(37,"mat-form-field",16),D.Vb(38,"mat-label"),D.Dc(39,"S\u1ed1 h\xe0ng hi\u1ec3n th\u1ecb"),D.Ub(),D.Vb(40,"mat-select",17),D.cc("selectionChange",function(t){return e.rowsChanged(t)})("ngModelChange",function(t){return e.selected1=t}),D.Bc(41,lt,2,2,"mat-option",18),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub(),D.Ub()),2&t&&(D.Db(32),D.lc("ngForOf",e.Projects),D.Db(4),D.lc("totalItems",e.totalItems)("ngModel",e.currentPage)("maxSize",e.maxSize)("boundaryLinks",!0)("rotate",!1)("itemsPerPage",e.itemsPerPage),D.Db(1),D.yc("width",80,"px"),D.Db(3),D.lc("ngModel",e.selected1),D.Db(1),D.lc("ngForOf",e.options))},directives:[et.a,n.j,it.a,P.i,P.k,y.b,y.e,j.a,n.k,C.m],encapsulation:2}),t})(),data:{title:"D\u1ef1 \xe1n ch\u1edd ph\xea duy\u1ec7t"}}];let st=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=D.Nb({type:t}),t.\u0275inj=D.Mb({imports:[[r.g.forChild(dt)],r.g]}),t})();var bt=i("kMuZ");let gt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=D.Nb({type:t}),t.\u0275inj=D.Mb({imports:[[n.c,st,b.f,it.b.forRoot(),P.e,bt.a,o.b,c.a.initializeApp(a.a.firebaseConfig,"cloud"),et.b.forRoot()]]}),t})()}}]);